<div class="container" style="padding-top: 80px; max-width: 600px">
  <div class="row">
    <div class="col-12">
      <button mat-button (click)="goBack()" class="mb-3">
        <mat-icon>arrow_back</mat-icon>
        <span i18n>Back to sign in</span>
      </button>

      <h2
        class="mat-headline-medium"
        i18n="forgot password title@@forgotPassword.title"
      >
        Forgot password
      </h2>
      <p
        class="mat-body"
        i18n="forgot password description@@forgotPassword.description"
      >
        Enter your E-mail address and you will receive an E-mail with
        instructions to reset your password.
      </p>
    </div>
  </div>

  @if(!sendingSuccessful) {
  <div class="row">
    <div class="col-12">
      <form [formGroup]="forgotPasswordForm" class="d-flex flex-column">
        <mat-form-field appearance="outline">
          <mat-label i18n>E-Mail</mat-label>
          <input matInput type="email" formControlName="email" />
          @if(emailFieldHasError) {
          <mat-error i18n>This E-Mail address is not valid!</mat-error>
          }
        </mat-form-field>

        @if(forgotPasswordError) {
        <div class="alert alert-danger mb-3">
          {{ forgotPasswordError }}
        </div>
        }

        <div id="reCaptchaDiv" class="d-flex justify-content-center mb-3"></div>

        <button
          mat-flat-button
          color="primary"
          type="submit"
          [disabled]="emailFieldHasError || isSending"
          (click)="resetPassword(forgotPasswordForm.value)"
        >
          @if(isSending) {
          <span i18n>Sending...</span>
          } @else {
          <span i18n>Reset password</span>
          }
        </button>
      </form>
    </div>
  </div>
  } @else {
  <div class="row">
    <div class="col-12 d-flex flex-column align-items-center pt-4">
      <mat-icon
        class="successIcon mb-3"
        style="
          font-size: 64px;
          height: 64px;
          width: 64px;
          color: var(--mat-primary-color);
        "
        >check_circle</mat-icon
      >
      <h2 class="mat-h2 text-center" i18n>The reset E-mail has been sent!</h2>
      <p class="mat-body text-center" i18n>
        Check your inbox and follow the instructions to reset your password.
      </p>
      <button mat-stroked-button (click)="goBack()" class="mt-3">
        <span i18n>Return to sign in</span>
      </button>
    </div>
  </div>
  }
</div>
