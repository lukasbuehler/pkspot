@if (hasAnyContent()) {
<div class="spot-edit-summary d-flex flex-column gap-2">
  @if (compact()) {
    @if (typeAndAccessChips().length > 0) {
    <mat-chip-set aria-label="Type and access changes">
      @for (chip of typeAndAccessChips(); track chip.label) {
      <mat-chip class="chip-default">
        <mat-icon matChipAvatar>{{ chip.icon }}</mat-icon>
        {{ chip.label }}
      </mat-chip>
      }
    </mat-chip-set>
    }

    @if (amenityChips().length > 0) {
    <mat-chip-set aria-label="Amenity changes">
      @for (chip of amenityChips(); track chip.label + chip.icon) {
      <mat-chip [class.chip-negative]="chip.tone === 'negative'">
        <mat-icon matChipAvatar>{{ chip.icon }}</mat-icon>
        {{ chip.label }}
      </mat-chip>
      }
    </mat-chip-set>
    }

    @if (fieldChips().length > 0) {
    <mat-chip-set aria-label="Other changes">
      @for (chip of fieldChips(); track chip.label) {
      <mat-chip class="chip-default">
        <mat-icon matChipAvatar>{{ chip.icon }}</mat-icon>
        {{ chip.label }}
      </mat-chip>
      }
    </mat-chip-set>
    }
  } @else {
    @if (detailedRows().length > 0) {
    <div class="change-list">
      @for (row of detailedRows(); track row.key) {
      <div
        class="change-row"
        [class.change-row-negative]="row.tone === 'negative'"
        [class.change-row-half]="row.layout === 'half'"
      >
        <div class="change-row__label">
          <mat-icon>{{ row.icon }}</mat-icon>
          <span class="mat-body-medium">{{ row.label }}</span>
        </div>
        <div class="change-row__values">
          @if (row.previousValue) {
          <div class="change-row__value-previous mat-body-small">
            <span i18n>Before</span>: {{ row.previousValue }}
          </div>
          }
          <div class="change-row__value-current mat-body-medium">
            @if (row.previousValue) {
            <span i18n>Now</span>:
            } {{ row.value }}
          </div>
        </div>
      </div>
      }
    </div>
    }
  }

  @if (addedMedia().length > 0) {
  <div class="media-section d-flex flex-column gap-2">
    <div class="mat-label-small" i18n>Added media</div>
    <div class="d-flex align-items-center gap-1">
      <button
        mat-icon-button
        type="button"
        aria-label="Show previous media thumbnails"
        [disabled]="!canSlideBack()"
        (click)="slideBack()"
      >
        <mat-icon>chevron_left</mat-icon>
      </button>

      <div class="thumb-strip d-flex gap-2 flex-grow-1">
        @for (media of visibleMedia(); track media.previewSrc) {
        <div class="thumb">
          <img [src]="media.previewSrc" alt="Added media thumbnail" />
          @if (media.type === "video") {
          <span class="video-badge">
            <mat-icon>play_circle</mat-icon>
          </span>
          }
        </div>
        }
      </div>

      <button
        mat-icon-button
        type="button"
        aria-label="Show more media thumbnails"
        [disabled]="!canSlideForward()"
        (click)="slideForward()"
      >
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </div>
  }
</div>
}
